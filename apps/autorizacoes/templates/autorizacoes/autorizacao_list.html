{% extends 'coordenador_base.html' %}
{% block coord %}
<div class="heading-block fancy-title nobottomborder">
    <table class="table">
        <tr>
            <td width="90%"><h4>Autorizações - {{evento.nome}}{% if evento.is_canceled %} - Cancelado em {{evento.data_cancelamento}} {% endif %}</h4></td>
            <td>
                {% if autorizacoes and not evento.is_canceled %}
                <div class="btn-group">
                    <button type="button" class="button button-small button-border button-rounded
                     button-blue dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Relatórios
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="{% url 'autorizacao-print' 0 evento.pk %}" target="_blank">Autorizados</a>
                        <a class="dropdown-item" href="{% url 'autorizacao-print' 1 evento.pk %}" target="_blank">Negados</a>
                        <a class="dropdown-item" href="{% url 'autorizacao-print' 2 evento.pk %}" target="_blank">Pendentes</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="{% url 'autorizacao-print' 3 evento.pk %}" target="_blank">Todas</a>
                    </div>
                </div>
                {% endif %}
            </td>
        </tr>
    </table>
</div>

<div class="container mw-md">
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>Aluno</th>
                    <th>Tipo</th>
                    <th>Status</th>
                    <th>Data recebimento</th>
                </tr>
            </thead>
            <tbody>
                {% for e in autorizacoes %}
                <tr>
                    <td>
                        {{e.aluno}}
                    </td>
                    <td>
                        {{e.tipo.apelido}}
                    </td>
                    {% if e.autorizado == "Autorizado" %}
                        <td style="color:#2ecc71">
                    {% elif e.autorizado == "Pendente" %}
                        <td style="color:#D2691E">
                    {% elif e.autorizado == "Negado" %}
                        <td style="color:#B22222">
                    {% elif e.autorizado == "Cancelado" %}
                        <td style="color:#B22222">
                    {% endif %}
                        {{e.autorizado}}
                    </td>
                    {% if e.data_modificacao is not None %}
                    <td>
                        {{e.data_modificacao}}
                    </td>
                    {% else %}
                    <td>
                        {{e.e.data_criacao}}
                    </td>
                    {% endif %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4">Sem dados para exibir</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}